# Домашнее задание к занятию 10.2 «Кластеризация» - Прохоров Семен
**

---

### Задание 1

В чём различие между SMP- и MPP-системами?

SMP (symmetric multiprocessing) - симметричная многопроцессорная архитектура, сильно связанные <br>
MPP (massive parallel processing) - массивно-параллельная архитектура, слабо связанные<br>
Сильно связанная система состоит из нескольких однородных процессоров и массива общей памяти. В слабо связанных системах вся память распределена физически между процессорными элементами

---

### Задание 2

В чём отличие сильно связанных и слабо связанных систем?

Основное различие между слабосвязанной и сильно связанной многопроцессорной системой заключается в том, что слабосвязанная система имеет распределенную память, тогда как тесно связанная система имеет общую память.

Слабосвязанная многопроцессорная система:

1) Каждый процессор имеет свой собственный модуль памяти.
2) Эффективен при выполнении задач, выполняемых на разных процессорах, имеет минимальное взаимодействие
3) Как правило, не сталкиваются с конфликтом памяти.
4) Взаимосвязь на основе Системы передачи сообщений (МТС).
5) Скорость передачи данных - низкая
6) Стоимость - недорогая

Сильно связанная многопроцессорная система:

1) Процессоры имеют общие модули памяти.
2) Эффективен для высокоскоростной обработки или обработки в реальном времени.
3) Испытывают больше конфликтов памяти.
4) Взаимосвязь на основе Взаимосвязанных сетей PMIN, IOPIN, ISIN.
5) Скорость передачи данных - высокая
6) Стоимость - дорогая

---

### Задание 3

Какие преимущества отличают кластерные системы от обычных серверов?

Преимущества кластерных систем

1) абсолютная масштабируемость
2) нет ограничений на размер узлов и кластеров
3) наращиваемая масштабируемость
4) можно расширять узлы по необходимости
5) высокий коэффициент готовности
6) отказоустойчивость, благодаря автономности узлов
7) соотношение цена/производительность
8) можно строить кластер из любых строительных блоков: чем проще и стандартнее блоки, тем дешевле обходится вычислительная мощность.

---

### Задание 4

Приведите примеры типов современных кластерных систем.

Отказоустойчивые кластеры (High-availability clusters, HA, кластеры высокой доступности) - Corosync, Red Hat Cluster Suite, Microsoft Windows Server, Linux - HA, Pacemaker

Кластеры с балансировкой нагрузки (Load balancing clusters):

- сетевая балансировка
- транспортная балансировка
- прикладная балансировка

Вычислительные кластеры (High performance computing clusters, HPC)

Системы распределенных вычислений:

- распределенные вычисления
- грид-вычисления (добровольные гриды, научные гриды, гриды на основе вычислительных ресурсов по требованию)

---

### Задание 5

Где используют сервис Kafka, rabitMQ?

RabbitMQ

- Вам важна гибкость в маршрутизации сообщений внутри системы. Инструментарий для построения путей доставки данных в RabbitMQ способен решить даже самые хитрые сценарии в организации потоков событий.

- Вам важен сам факт доставки сообщений, но порядок доставки не принципиален. Настройки RabbitMQ его не гарантируют: если вы сначала отправили сообщение №1, а затем сообщение №2, то подписчику они могут прийти в обратном порядке.

Apache Kafka

- Apache Kafka однозначно подходит, если вы работаете с big data. Репликация и параллельная обработка теоретически могут масштабировать вашу систему до бесконечности. Плюс Kafka выигрывает по производительности: может достичь пропускной способности в миллионы сообщений в секунду даже при ограниченных ресурсах.

- Решение позволяет программистам извлекать из очереди сообщения (Message Queuing) за любой момент времени.

- В некоторых системах порядок совершения событий имеет критическое значение — например, груз не может быть доставлен до того, как был отправлен. В таких системах необходимо использовать Apache Kafka: он гарантирует порядок доставки сообщений.

---

## Задания со звёздочкой*
Эти задания дополнительные. Их можно не выполнять. На зачёт это не повлияет. Вы можете их выполнить, если хотите глубже разобраться в материале.

---

### Задание 6*

Исследуйте построение кластера на основе rabbitMQ: https://github.com/ypereirareis/docker-rabbitmq-ha-cluster. 
Используя docker-compose, соберите инфраструктуру. Исследуйте её работы.

Ответьте на вопросы.

1) На каких компонетах развёрнут кластер?

A docker stack to create, test and benchmark a rabbitmq cluster in high availability configuration:

- RabbitMQ	v3.6.5
- HAProxy	v1.6.3
- PHP	v7.1
- Docker	v1.12+
- Docker-compose	v1.8+

2) Назначение компонентов кластера.

3 RabbitMQ nodes but we can add a lot more.<br>
3 docker networks to be able to simulate network partition.<br>
1 HAProxy node to load balance request and to be "failure proof".<br>
1 default network for the consumers and producers to connect with nodes through HAProxy.<br>


3) Какие тесты можно провести для анализа работы кластера?


Tests / Benchmark
With this stack you will be able to experiment:

- Load Balancing
- Node failure
- Network partition
- Messages persistency
- Message NO ACK and retries


