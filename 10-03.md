# Домашнее задание к занятию 10.3 «Pacemaker»

Домашнее задание выполните в Google Docs и отправьте в личном кабинете на проверку ссылку на ваш документ.

Название файла должно содержать номер лекции и фамилию студента. Пример названия: «10.3 Pacemaker — Александр Александров»

Перед тем как выслать ссылку, убедитесь, что её содержимое не приватно, т. е.  открыто на просмотр всем, у кого есть ссылка. Если нужно прикрепить дополнительные ссылки, просто добавьте их в Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1

Опишите основные функции и назначение Pacemaker.

Pacemaker - это наиболее широко используемый диспетчер ресурсов кластера с открытым исходным кодом в среде Linux.  Pacemaker использует функции управления сообщениями и элементами кластера, предоставляемые инфраструктурой  кластера (Corosync или Heartbeat), для обнаружения сбоев на уровне узлов и ресурсов и восстановления ресурсов,  тем самым обеспечивая максимальную надежность и высокую доступность кластерных сервисов.

Основные функции:

- позволяет находить и устранять сбои на уровне нод и служб;
- не зависит от подсистемы хранения: нет требования к общему накопителю;
- не зависит от типов ресурсов: все, что можно прописать в скрипты, можно кластеризовать;
- поддерживает STONITH (Shoot-The-Other-Node-In-The-Head), то есть умершая нода изолируется и запросы к ней не поступают, пока нода не отправит сообщение о том, что она снова в рабочем состоянии;
- поддерживает кворумные и ресурсозависимые кластеры любого размера;
- поддерживает практически любую избыточную конфигурацию;
- может автоматически реплицировать конфиг на все узлы кластера — не придется править все вручную;
- можно задать порядок запуска ресурсов, а также их совместимость на одном узле;
- поддерживает расширенные типы ресурсов: клоны (когда ресурс запущен на множестве узлов) и дополнительные состояния (master/slave и подобное) — актуально для СУБД (MySQL, MariaDB, PostgreSQL, Oracle);
- имеет единую кластерную оболочку CRM с поддержкой скриптов.

---

### Задание 2

Опишите основные функции и назначение Corosync.

Corosync — это программный продукт, позволяющий реализовать кластер серверов. Его основное назначение — знать и передавать состояние всех участников кластера.

В основе работы заложены следующие функции:

- отслеживание состояния приложений;
- оповещение приложений о смене активной ноды кластера;
- отправка одинаковых сообщений процессам на всех узлах кластера;
- предоставление доступа к базе данных с конфигурацией и статистикой, а также отправка уведомлений о ее изменениях.


---

### Задание 3

Соберите модель, состоящую из двух виртуальных машин. Установите Pacemaker, Corosync, Pcs. Настройте HA кластер.

![alt text](https://github.com/colex29/srlb-hw-9.5/blob/67aa1a0616a32e7c58569e8db3bf651270628f02/img/10.3/1.PNG)
![alt text](https://github.com/colex29/srlb-hw-9.5/blob/67aa1a0616a32e7c58569e8db3bf651270628f02/img/10.3/2.PNG)
![alt text](https://github.com/colex29/srlb-hw-9.5/blob/67aa1a0616a32e7c58569e8db3bf651270628f02/img/10.3/4.PNG)
![alt text](https://github.com/colex29/srlb-hw-9.5/blob/67aa1a0616a32e7c58569e8db3bf651270628f02/img/10.3/3.PNG)
![alt text](https://github.com/colex29/srlb-hw-9.5/blob/67aa1a0616a32e7c58569e8db3bf651270628f02/img/10.3/5.PNG)
---



